{"ast":null,"code":"import _objectSpread from \"C:\\\\dev\\\\fullstack\\\\part6\\\\anecdotes\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport anecdotesService from \"../services/anecdotes\";\n\nconst getId = () => (100000 * Math.random()).toFixed(0);\n\nexport const vote = id => {\n  return {\n    type: \"VOTE\",\n    data: {\n      id\n    }\n  };\n};\nexport const create = anecdote => {\n  return async dispatch => {\n    const newAnecdote = {\n      content: anecdote.data.content,\n      id: getId(),\n      votes: 0\n    };\n    const content = anecdotesService.createAnecdote(newAnecdote);\n    dispatch({\n      type: \"CREATE\",\n      data: {\n        content\n      }\n    });\n  };\n};\nexport const initialize = () => {\n  return async dispatch => {\n    const content = await anecdotesService.getAll();\n    dispatch({\n      type: \"INIT\",\n      data: content\n    });\n  };\n};\n\nconst reducer = (state = [], action) => {\n  console.log('state now: ', state);\n  console.log('action', action);\n\n  switch (action.type) {\n    case \"VOTE\":\n      const anecdoteToChange = state.find(i => i.id === action.data.id);\n\n      const changedAnecdote = _objectSpread({}, anecdoteToChange, {\n        votes: anecdoteToChange.votes + 1\n      });\n\n      return state.map(i => i.id === action.data.id ? changedAnecdote : i);\n\n    case \"CREATE\":\n      return [...state, action.data];\n\n    case \"INIT\":\n      return action.data;\n\n    default:\n  }\n\n  return state;\n};\n\nexport default reducer;","map":{"version":3,"sources":["C:\\dev\\fullstack\\part6\\anecdotes\\src\\reducers\\anecdoteReducer.js"],"names":["anecdotesService","getId","Math","random","toFixed","vote","id","type","data","create","anecdote","dispatch","newAnecdote","content","votes","createAnecdote","initialize","getAll","reducer","state","action","console","log","anecdoteToChange","find","i","changedAnecdote","map"],"mappings":";AAAA,OAAOA,gBAAP,MAA6B,uBAA7B;;AAEA,MAAMC,KAAK,GAAG,MAAM,CAAC,SAASC,IAAI,CAACC,MAAL,EAAV,EAAyBC,OAAzB,CAAiC,CAAjC,CAApB;;AAEA,OAAO,MAAMC,IAAI,GAAIC,EAAD,IAAO;AACzB,SAAM;AACJC,IAAAA,IAAI,EAAE,MADF;AAEJC,IAAAA,IAAI,EAAC;AACHF,MAAAA;AADG;AAFD,GAAN;AAMD,CAPM;AASP,OAAO,MAAMG,MAAM,GAAIC,QAAD,IAAa;AACjC,SAAO,MAAMC,QAAN,IAAiB;AACtB,UAAMC,WAAW,GAAG;AAClBC,MAAAA,OAAO,EAAEH,QAAQ,CAACF,IAAT,CAAcK,OADL;AAElBP,MAAAA,EAAE,EAAEL,KAAK,EAFS;AAGlBa,MAAAA,KAAK,EAAE;AAHW,KAApB;AAKA,UAAMD,OAAO,GAAGb,gBAAgB,CAACe,cAAjB,CAAgCH,WAAhC,CAAhB;AACAD,IAAAA,QAAQ,CAAC;AACPJ,MAAAA,IAAI,EAAC,QADE;AAEPC,MAAAA,IAAI,EAAC;AACHK,QAAAA;AADG;AAFE,KAAD,CAAR;AAMD,GAbD;AAcD,CAfM;AAiBP,OAAO,MAAMG,UAAU,GAAG,MAAK;AAC7B,SAAO,MAAML,QAAN,IAAiB;AACtB,UAAME,OAAO,GAAG,MAAMb,gBAAgB,CAACiB,MAAjB,EAAtB;AACAN,IAAAA,QAAQ,CAAC;AACPJ,MAAAA,IAAI,EAAE,MADC;AAEPC,MAAAA,IAAI,EAAEK;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;;AAUP,MAAMK,OAAO,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AACtCC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BH,KAA3B;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,MAAtB;;AAEA,UAAOA,MAAM,CAACb,IAAd;AACE,SAAK,MAAL;AACE,YAAMgB,gBAAgB,GAAGJ,KAAK,CAACK,IAAN,CAAWC,CAAC,IAAIA,CAAC,CAACnB,EAAF,KAASc,MAAM,CAACZ,IAAP,CAAYF,EAArC,CAAzB;;AACA,YAAMoB,eAAe,qBAChBH,gBADgB;AAEnBT,QAAAA,KAAK,EAAES,gBAAgB,CAACT,KAAjB,GAAyB;AAFb,QAArB;;AAIA,aAAOK,KAAK,CAACQ,GAAN,CAAUF,CAAC,IAAIA,CAAC,CAACnB,EAAF,KAASc,MAAM,CAACZ,IAAP,CAAYF,EAArB,GAA0BoB,eAA1B,GAA4CD,CAA3D,CAAP;;AACF,SAAK,QAAL;AACE,aAAO,CAAC,GAAGN,KAAJ,EAAWC,MAAM,CAACZ,IAAlB,CAAP;;AACF,SAAK,MAAL;AACE,aAAOY,MAAM,CAACZ,IAAd;;AACF;AAZF;;AAeA,SAAOW,KAAP;AACD,CApBD;;AAsBA,eAAeD,OAAf","sourcesContent":["import anecdotesService from \"../services/anecdotes\";\n\nconst getId = () => (100000 * Math.random()).toFixed(0);\n\nexport const vote = (id) =>{\n  return{\n    type: \"VOTE\",\n    data:{\n      id\n    }\n  }\n};\n\nexport const create = (anecdote) =>{\n  return async dispatch =>{\n    const newAnecdote = {\n      content: anecdote.data.content,\n      id: getId(),\n      votes: 0\n    };\n    const content = anecdotesService.createAnecdote(newAnecdote);\n    dispatch({\n      type:\"CREATE\",\n      data:{\n        content\n      }\n    })\n  }\n};\n\nexport const initialize = () =>{\n  return async dispatch =>{\n    const content = await anecdotesService.getAll();\n    dispatch({\n      type: \"INIT\",\n      data: content\n    })\n  }\n};\n\nconst reducer = (state = [], action) => {\n  console.log('state now: ', state);\n  console.log('action', action);\n\n  switch(action.type){\n    case \"VOTE\":\n      const anecdoteToChange = state.find(i => i.id === action.data.id);\n      const changedAnecdote = {\n        ...anecdoteToChange,\n        votes: anecdoteToChange.votes + 1\n      };\n      return state.map(i => i.id === action.data.id ? changedAnecdote : i);\n    case \"CREATE\":\n      return [...state, action.data];\n    case \"INIT\":\n      return action.data;\n    default:\n  }\n\n  return state\n};\n\nexport default reducer"]},"metadata":{},"sourceType":"module"}